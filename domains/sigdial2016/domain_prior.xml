<?xml version="1.0" encoding="UTF-8"?>

<model trigger="new_intent^t,motion">
 
	<rule id="clearorcontinue">
		<case>
			<condition>
				<if var="new_intent^t" relation="!=" value="true" />
			</condition>
			<effect>
				<set var="i_u^p" value="{i_u}" />
			</effect>
		</case>
	</rule>
	
	<rule id="stopping">
		<case>
			<condition>
				<if var="motion" relation="=" value="true"/>
			</condition>
			<effect prob="0.1">
				<set var="i_u^p" value="Stop"/>
			</effect>
			<effect prob="0.1">
				<set var="i_u^p" value="Disconfirm"/>
			</effect>
		</case>
		<case>
			<condition>
				<if var="motion" relation="=" value="None"/>
				<if var="new_intent^t" relation="=" value="None" />
			</condition>
			<effect prob="1.0">
				<set var="new_intent^t" value="true"/>
			</effect>
		</case>
	</rule>


	<rule id="moveprior">
		<case>
			<condition>
				<if var="new_intent^t" value="true" />
			</condition>
			<effect prob="0.075">
				<set var="i_u^p" value="Move(Left)" />
			</effect>
			<effect prob="0.075">
				<set var="i_u^p" value="Move(Forward)" />
			</effect>
			<effect prob="0.075">
				<set var="i_u^p" value="Move(Backward)" />
			</effect>
			<effect prob="0.075">
				<set var="i_u^p" value="Move(Right)" />
			</effect>
			<effect prob="0.075">
				<set var="i_u^p" value="Move(Left,Short)" />
			</effect>
			<effect prob="0.075">
				<set var="i_u^p" value="Move(Forward,Short)" />
			</effect>
			<effect prob="0.075">
				<set var="i_u^p" value="Move(Backward,Short)" />
			</effect>
			<effect prob="0.075">
				<set var="i_u^p" value="Move(Right,Short)" />
			</effect>
			<effect prob="0.075">
				<set var="i_u^p" value="Move(Turn)" />
			</effect>
		</case>
	</rule>

	<rule id="perceptionprior">
		<case>
			<condition>
				<if var="obj_{ID}" value="*"/>
				<if var="new_intent^t" value="true" />
			</condition>
			<effect prob="0.2">
				<set var="i_u^p" value="DoYouSee(obj_{ID})" />
			</effect>
			<effect prob="0.05">
				<set var="i_u^p" value="WhatDoYouSee" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="new_intent^t" value="true" />
			</condition>
			<effect prob="0.1">
				<set var="i_u^p" value="DoYouSee(*)" />
			</effect>
			<effect prob="0.1">
				<set var="i_u^p" value="WhatDoYouSee" />
			</effect>
		</case>
	</rule>


	<rule id="chitchatprior">
		<case>
			<condition>
				<if var="lastMove" value="None" />
				<if var="new_intent^t" value="true" />
			</condition>
			<effect prob="0.1">
				<set var="i_u^p" value="Ask(Name)" />
			</effect>
			<effect prob="0.2">
				<set var="i_u^p" value="Greeting" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="lastMove" value="Release" />
				<if var="new_intent^t" value="true" />
			</condition>
			<effect prob="0.2">
				<set var="i_u^p" value="Closing" />
			</effect>
		</case>
	</rule>


	<rule id="releaseprior">
		<case>
			<condition>
				<if var="new_intent^t" value="true" />
				<if var="carried" value="None" relation="!=" />
			</condition>
			<effect prob="0.2">
				<set var="i_u^p" value="Release" />
			</effect>
		</case>
	</rule>


	<rule id="pickupprior">
		<case>
			<condition>
				<if var="new_intent^t" value="true" />
				<if var="carried" value="None" relation="=" />
				<if var="obj_{ID}" value="*"/>
			</condition>
			<effect prob="0.2">
				<set var="i_u^p" value="PickUp(obj_{ID})" />
			</effect>
			<effect prob="0.05">
				<set var="i_u^p" value="PickUp(AtFeet)" />
			</effect>
		</case>
		<case>
			<condition>
				<if var="new_intent^t" value="true" />
				<if var="carried" value="None" relation="=" />
			</condition>
			<effect prob="0.05">
				<set var="i_u^p" value="PickUp(AtFeet)" />
			</effect>
		</case>
	</rule>


</model>